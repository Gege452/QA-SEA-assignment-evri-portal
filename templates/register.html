{% extends 'base.html' %}
{% block content %}
<h2>EVRi Courier Portal | Register</h2>
<form method="POST">
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="is_admin" name="is_admin" onclick="toggleRegisterFields()">
    <label class="form-check-label" for="is_admin">Are you registering as an employee? Check for Courier Admin.</label>
  </div>

  <div id="admin_fields" style="display:none">
    <div class="mb-3">
      <label>Name</label>
      <input type="text" name="admin_name" class="form-control">
    </div>
    <div class="mb-3">
      <label>Email address</label>
      <input type="email" name="admin_email" class="form-control">
    </div>
    <div class="mb-3">
      <label>Password</label>
      <input type="password" name="admin_password" class="form-control">
    </div>
    <div class="mb-3">
      <label>Confirm Password</label>
      <input type="password" name="admin_confirm_password" class="form-control">
    </div>
  </div>

  <div id="courier_fields">
    <div class="mb-3">
      <label>Name</label>
      <input type="text" name="name" class="form-control">
    </div>
    <div class="mb-3">
      <label>Region</label>
      <input type="text" name="region" class="form-control">
    </div>
    <div class="mb-3">
      <label>Phone</label>
      <input type="text" name="phone" class="form-control">
    </div>
    <div class="mb-3">
      <label>Email</label>
      <input type="email" name="email" class="form-control">
    </div>
    <div class="mb-3">
      <label>PIN (4 digits only)</label>
      <input type="text" name="pin" class="form-control" pattern="\d{4}" title="Please enter a 4-digit PIN">
    </div>
  </div>

  <div class="d-flex gap-2">
    <button type="submit" class="btn btn-success">Register</button>
    <a href="{{ url_for('login') }}" class="btn btn-secondary">Back to Login</a>
  </div>
</form>

<script>
function toggleRegisterFields() {
  const isAdmin = document.getElementById('is_admin').checked;
  document.getElementById('admin_fields').style.display = isAdmin ? 'block' : 'none';
  document.getElementById('courier_fields').style.display = isAdmin ? 'none' : 'block';
}
</script>
{% endblock %}